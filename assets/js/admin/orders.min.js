jQuery(function(a){var b={init:function(){a(document.body).on("click",".correios-tracking-code .dashicons-dismiss",this.removeTrackingCode).on("click",".correios-tracking-code .button-secondary",this.addTrackingCode).on("click",".correios-tracking-code a",this.openTrackingLink)},block:function(){a("#wc_correios").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){a("#wc_correios").unblock()},addTrackingFields:function(b){var c=a("body #wc_correios .correios-tracking-code"),d=wp.template("tracking-code-list");a(".correios-tracking-code__list",c).remove(),c.prepend(d({trackingCodes:b}))},addTrackingCode:function(c){c.preventDefault();var d=a("#add-tracking-code"),e=d.val();if(""!==e){var f=b,g={action:"woocommerce_correios_add_tracking_code",security:WCCorreiosAdminOrdersParams.nonces.add,order_id:WCCorreiosAdminOrdersParams.order_id,tracking_code:e};f.block(),d.val(""),a.ajax({type:"POST",url:ajaxurl,data:g,success:function(a){f.addTrackingFields(a.data),f.unblock()}})}},removeTrackingFields:function(b){var c=a("body #wc_correios .correios-tracking-code__list");1===a("li",c).length?c.remove():b.closest("li").remove()},removeTrackingCode:function(c){if(c.preventDefault(),window.confirm(WCCorreiosAdminOrdersParams.i18n.removeQuestion)){var d=b,e=a(this),f={action:"woocommerce_correios_remove_tracking_code",security:WCCorreiosAdminOrdersParams.nonces.remove,order_id:WCCorreiosAdminOrdersParams.order_id,tracking_code:e.data("code")};d.block(),a.ajax({type:"POST",url:ajaxurl,data:f,success:function(){d.removeTrackingFields(e),d.unblock()}})}},openTrackingLink:function(b){b.preventDefault(),a("#wc_correios_tracking_form").remove();var c=a(this).text(),d='<form id="wc_correios_tracking_form" method="post" action="http://www2.correios.com.br/sistemas/rastreamento/resultado_semcontent.cfm" target="_blank" style="display: none;">';d+='<input type="hidden" name="objetos" value="'+c+'" />',d+="</form>",a("body").prepend(d),a("#wc_correios_tracking_form").submit()}};b.init()});